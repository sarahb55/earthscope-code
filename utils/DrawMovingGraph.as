package earthscope.utils{		 import flash.display.Shape;    import flash.display.Sprite;    import flash.geom.Rectangle;    import flash.events.MouseEvent;	import flash.text.TextField;	import flash.text.TextFieldAutoSize;    import flash.text.TextFormat;	import flash.ui.Mouse;	import flash.filters.BevelFilter;	import flash.filters.BitmapFilterQuality;	import flash.filters.BitmapFilterType;	import flash.net.URLRequest;	import flash.utils.Timer;	import flash.events.TimerEvent;			public class DrawMovingGraph extends Sprite{				private var _timer:Timer;		private var _box:Sprite;		private var _rect:Rectangle;		private var _numPoints:Number = 100;		private var points:Array;						public function DrawMovingGraph(rect:Rectangle){			trace ("Creating new draw moving graph object...");						_timer = new Timer(100);			_timer.addEventListener(TimerEvent.TIMER, updateGraph);			_timer.start();			_rect = rect;			_numPoints = _rect.width;			_box = new Sprite();			addChild(_box);									points = new Array(_numPoints);			initGraph();						drawGraph();							}				private function initGraph(){						for(var i:int = 0; i <= _numPoints; i++){								points[i] = new Object();				points[i].x = i + _rect.x;				points[i].y = 0.1*Math.random()*_rect.height + _rect.height*0.5 + _rect.y;								trace("Making points");							}									graphics.lineStyle(1);						graphics.moveTo(points[0].x, points[0].y);						for(var i:int = 1; i < _numPoints - 1; i += 2){								graphics.curveTo(points[i].x, points[i].y, points[i+1].x, points[i+1].y);											}											}						public function pause(){			_timer.stop();		}				public function start(){						_timer.start();		}				public function drawGraph(){						with (_box.graphics) {                lineStyle(2, 0x7653AC);                beginFill(0xFFFF99, 0.1);                drawRect(_rect.x, _rect.y, _rect.width, _rect.height);                endFill();            }								}								public function updateGraph(TimerEvent){									graphics.clear();						for(var i:int = 0; i <= _numPoints; i++){							//points[i].x = i + _rect.x;				points[i].y = -Math.pow(_timer.currentCount/10, 1.5)+0.05*(-0.5*Math.random() + 0.5)*_rect.height + _rect.height*0.5 + _rect.y;												//trace("Making points");							}									graphics.lineStyle(1, 0xFF0000);						graphics.moveTo(_rect.x, _rect.height/2 - _rect.y);			graphics.lineTo(_rect.x + _rect.width, _rect.height/2 - _rect.y);						graphics.moveTo(points[0].x, points[0].y);						for(var i:int = 1; i < _numPoints - 1; i += 2){								graphics.lineStyle(2);				graphics.curveTo(points[i].x, points[i].y, points[i+1].x, points[i+1].y);											}						if(_timer.currentCount > 100){				this.pause();			}								}					}							}