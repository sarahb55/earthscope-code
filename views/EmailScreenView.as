package earthscope.views{		import earthscope.controller.GameEngine;import earthscope.views.OfficeScreenView;import earthscope.utils.AlertBox;import earthscope.models.EmailData;import earthscope.utils.GameButton;import earthscope.utils.GameButtonMayor;import earthscope.utils.DisplayGraphicsFiles;import earthscope.text.GameText;import earthscope.utils.GameButtonBamboo;import flash.events.MouseEvent;import flash.text.TextField;import flash.text.TextFieldAutoSize;import flash.text.TextFormat;import flash.display.Sprite;		public class EmailScreenView  extends Sprite{		var emailBack:DisplayGraphicsFiles;	var _game:GameEngine;	private var _lowerBorder:DisplayGraphicsFiles;	private var _emailData:EmailData;	private var _yesButton:GameButtonBamboo;	private var _noButton:GameButtonBamboo;	private var _doneButton:GameButtonBamboo;	private var _message:TextField;	private var _subject:TextField;	private var _office:OfficeScreenView;	var _format:TextFormat = new TextFormat();			public function EmailScreenView(office:OfficeScreenView, game:GameEngine, email:EmailData){				emailBack = new DisplayGraphicsFiles();		emailBack.loadFile(GameText.PICTURE_DIRECTORY + GameText.EMAIL_SCREEN_BACKGROUND);		addChild(emailBack);		emailBack.x = GameText.BACK_Y;		emailBack.y = GameText.BACK_X;				_emailData = email;		_game = game;		_office = office;		_format.size = 18;			}		public function onEnterEmailScreen(){				_yesButton = new GameButtonBamboo(25, 470, 50, 100, _emailData.reply1);		_noButton = new GameButtonBamboo(575, 470, 50, 100, _emailData.reply2);								_message = new TextField();		_message.defaultTextFormat = _format;		_subject = new TextField();		_subject.defaultTextFormat = _format;		_message.multiline = true;		_message.wordWrap = true;		_message.text = _emailData.body;		_subject.text = "Subject:  "+ _emailData.subject + "     From:   " + _emailData.from;		addChild(_message);		addChild(_subject);		_subject.x = 200;		_subject.y = 120;		_subject.width = 500;				_message.x = 200;		_message.y = 160;		_message.width = 500;		_message.height = 450;		_message.selectable = false;				if(_emailData.reply2 != "none"){			addChild(_noButton);			_yesButton.addEventListener(MouseEvent.CLICK, replyYes);			_noButton.addEventListener(MouseEvent.CLICK, replyNo);					}		else{			_yesButton.addEventListener(MouseEvent.CLICK, toHelicopterGame);		}				addChild(_yesButton);			//load and display current email	}		public function toHelicopterGame(MouseEvent):void{				//To Do this should go to email screen.		_emailData.next();		_message.text = "";		_subject.text = "";		onExitEmailScreen();			}		public function replyYes(e:MouseEvent){		try{		_emailData.reply(_emailData.reply1);		_message.text = "";		_subject.text = "";		_message.text = _emailData.body;		_subject.text = _emailData.subject;		upDate();		}		catch(error:Error) {						removeChild(_yesButton);			removeChild(_noButton);			addChild(_doneButton);							}			}		public function replyNo(e:MouseEvent){				try{		_emailData.reply(_emailData.reply2);		_message.text = "";		_subject.text = "";		_message.text = _emailData.body;		_subject.text = _emailData.subject;		upDate();		}		catch(error:Error) {						removeChild(_yesButton);			removeChild(_noButton);			addChild(_doneButton);							}			}		private function upDate(){		_doneButton = new GameButtonBamboo(25, 470, 50, 100, _emailData.done);		_doneButton.addEventListener(MouseEvent.CLICK, onDone);		_office.buildScoreBar();		removeChild(_yesButton);		removeChild(_noButton);		addChild(_doneButton);							}		private function onDone(MouseEvent):void{				removeChild(_doneButton);		_emailData.next();		onExitEmailScreen();		_message.text = "";		_subject.text = "";			}	public function onExitEmailScreen(){						_office.onExitEmailScreen();		//_player.stop();			}		}}